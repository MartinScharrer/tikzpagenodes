% \subsection{Package Header}
%
%    \begin{macrocode}
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{tikzpagelayout}[2011/09/14 v1.0 Special PGF/TikZ nodes for elements of the page layout]
%    \end{macrocode}
%
%    \begin{macrocode}
\RequirePackage{tikz}
\RequirePackage{ifoddpage}
%    \end{macrocode}
%
% \subsection{Different margins for odd and even pages in \texttt{twoside} mode}
%
% Update the page conditional for every picture which uses \texttt{remember picture}.
%    \begin{macrocode}
\tikzset{every picture/.append style={execute at begin picture={%
    \ifpgfrememberpicturepositiononpage
        \checkoddpage
    \fi
}}}
%    \end{macrocode}
%
% \begin{macro}{\currentsidemargin}
% Expands to the current left side margin, i.e. \Macro\oddsidemargin for odd pages in |twoside| mode and all pages in |oneside| mode
% or \Macro\evensidemargin for even pages in |twoside| mode.
%    \begin{macrocode}
\def\currentsidemargin{\ifoddpageoroneside\oddsidemargin\else\evensidemargin\fi}%
%    \end{macrocode}
% \end{macro}
%
%
% \subsection{Often used lengths}
%
% \begin{macro}{\current@textarea@left}
% Complete left margin including 1in constant and offset. This value is used multiple times and therefore stored in macro.
%    \begin{macrocode}
\def\current@textarea@left{(1in+\hoffset+\currentsidemargin)}
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\current@textarea@top}
% Complete top margin including 1in constant, offset and header. This value is used multiple times and therefore stored in macro.
%    \begin{macrocode}
\def\current@textarea@top{(1in+\voffset+\topmargin+\headheight+\headsep)}
%    \end{macrocode}
% \end{macro}
%
%
% \subsection{Current Page Text Area Node}
%    \begin{macrocode}
\expandafter\def\csname pgf@sh@ns@current page text area\endcsname{rectangle}
\expandafter\def\csname pgf@sh@np@current page text area\endcsname{%
    \def\southwest{\pgfpoint{\current@textarea@left}{\paperheight-\current@textarea@top-\textheight}}%
    \def\northeast{\pgfpoint{\current@textarea@left+\textwidth}{\paperheight-\current@textarea@top}}%
}
\expandafter\let\csname pgf@sh@nt@current page text area\expandafter\endcsname\csname pgf@sh@nt@current page\endcsname
\expandafter\let\csname pgf@sh@pi@current page text area\expandafter\endcsname\csname pgf@sh@pi@current page\endcsname
%    \end{macrocode}
%
%
% \subsection{Current Page Marginpar Area Node}
%    \begin{macrocode}
\expandafter\def\csname pgf@sh@ns@current page marginpar area\endcsname{rectangle}
\expandafter\def\csname pgf@sh@np@current page marginpar area\endcsname{%
    \def\southwest{%
        \ifoddpageoroneside
            \pgfpoint{\current@textarea@left+\textwidth+\marginparsep}{\paperheight-\current@textarea@top-\textheight}%
        \else
            \pgfpoint{\current@textarea@left-\marginparsep}{\paperheight-\current@textarea@top-\textheight}%
        \fi
    }%
    \def\northeast{%
        \ifoddpageoroneside
            \pgfpoint{\current@textarea@left+\textwidth+\marginparsep+\marginparwidth}{\paperheight-\current@textarea@top}%
        \else
            \pgfpoint{\current@textarea@left-\marginparsep-\marginparwidth}{\paperheight-\current@textarea@top}%
        \fi
    }%
}
\expandafter\let\csname pgf@sh@nt@current page marginpar area\expandafter\endcsname\csname pgf@sh@nt@current page\endcsname
\expandafter\let\csname pgf@sh@pi@current page marginpar area\expandafter\endcsname\csname pgf@sh@pi@current page\endcsname
%    \end{macrocode}
%
%
% \subsection{Current Page Header Area Node}
%    \begin{macrocode}
\expandafter\def\csname pgf@sh@ns@current page header area\endcsname{rectangle}
\expandafter\def\csname pgf@sh@np@current page header area\endcsname{%
    \def\southwest{\pgfpoint{\current@textarea@left}{\paperheight-\current@textarea@top+\headsep}}%
    \def\northeast{\pgfpoint{\current@textarea@left+\textwidth}{\paperheight-\current@textarea@top+\headsep+\headheight}}%
}
\expandafter\let\csname pgf@sh@nt@current page header area\expandafter\endcsname\csname pgf@sh@nt@current page\endcsname
\expandafter\let\csname pgf@sh@pi@current page header area\expandafter\endcsname\csname pgf@sh@pi@current page\endcsname
%    \end{macrocode}
%
%
% \subsection{Current Page Footer Area Node}
%    \begin{macrocode}
\expandafter\def\csname pgf@sh@ns@current page footer area\endcsname{rectangle}
\expandafter\def\csname pgf@sh@np@current page footer area\endcsname{%
    \def\southwest{\pgfpoint{\current@textarea@left}{\paperheight-\current@textarea@top-\textheight-\footskip}}%
    \def\northeast{\pgfpoint{\current@textarea@left+\textwidth}{\paperheight-\current@textarea@top-\textheight-\footskip+\headheight}}%
}
\expandafter\let\csname pgf@sh@nt@current page footer area\expandafter\endcsname\csname pgf@sh@nt@current page\endcsname
\expandafter\let\csname pgf@sh@pi@current page footer area\expandafter\endcsname\csname pgf@sh@pi@current page\endcsname
%    \end{macrocode}
%
